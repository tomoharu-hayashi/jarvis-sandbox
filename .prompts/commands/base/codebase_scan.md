# コードベース健全性スキャン

リポジトリ全体を読み込み、正常性確認とリファクタリング候補の発見を行います。

## 実行手順

### 1. コードベースの全体像を把握

まず以下を確認:

- `git ls-files` でトラッキング中のファイル一覧を取得
- 主要なコードファイル（.ts, .tsx, .py, .go, .rs など）を特定
- 設定ファイル、テストファイルの場所を把握

### 2. コードを大量に読み込む

**重要**: LLMは大量のコードを読み込んでも問題ない。遠慮せず読む。

- 主要なソースコードをできるだけ多く読み込む
- エントリポイント、コアロジック、ユーティリティを優先
- テストコードも読み込み、テストされていない部分を特定

### 3. 正常性チェック

以下の観点で確認:

- **論理的な矛盾**: 到達不能コード、常に true/false の条件
- **型の不整合**: 暗黙の any、不適切なキャスト
- **エラーハンドリング**: 握りつぶし、不完全なキャッチ
- **リソースリーク**: 未クローズのファイル/接続
- **競合状態**: 非同期処理の問題

### 4. リファクタリング候補の発見

以下の観点で確認:

- **重複コード**: 似たような処理が複数箇所にある
- **過度な複雑性**: 深いネスト、長い関数、多すぎる引数
- **命名の不一致**: 同じ概念に異なる名前、略語の混在
- **依存関係**: 循環依存、不要な結合
- **デッドコード**: 未使用の変数、関数、インポート

### 5. 発見事項のレポート

以下の形式で報告:

```
## 発見事項

### 🔴 要対応（正常性に影響）
- [ファイル:行] 問題の説明

### 🟡 推奨（リファクタリング候補）
- [ファイル:行] 改善提案

### 🟢 良い点
- 適切に実装されている部分を記載
```

## 注意事項

- 細かいスタイルの指摘より、構造的な問題を優先
- 既存のコーディングパターンを尊重
- 変更は提案のみ。実際の修正はユーザーの判断を待つ
